{% load i18n humanize %}

<article class="group relative bg-white rounded-3xl border border-[#ffe9cc] shadow-sm
         hover:shadow-[0_10px_30px_rgba(0,0,0,0.12)] hover:-translate-y-1
         transition-all duration-300 overflow-hidden">

    <!-- Image -->
    <div class="relative w-full h-48 overflow-hidden rounded-t-3xl">
        {% if item.main_photo %}
            <img src="{{ item.main_photo.image.url }}"
                 alt="{{ item.title }}"
                 class="w-full h-full object-cover transition-all duration-500 group-hover:scale-110" />
        {% else %}
            <div class="w-full h-full bg-gray-100 flex items-center justify-center text-sm text-gray-400">
                {% trans "No image" %}
            </div>
        {% endif %}
    </div>

    <!-- Content -->
    <div class="p-4">

        <!-- Title -->
        <h3 class="font-bold text-lg text-gray-900 truncate" title="{{ item.title }}">
            {{ item.title }}
        </h3>

        <!-- Location + Time -->
        <div class="mt-3 flex items-center justify-between text-sm text-gray-500">

            <!-- Location -->
            <span class="flex items-center gap-1">
                <span class="text-base">ğŸ“</span>
                {% if item.city %}
                    {{ item.city }}
                {% else %}
                    â€”
                {% endif %}
            </span>

            <!-- Time -->
            <span class="flex items-center gap-1">
                <span class="text-base">â±ï¸</span>

                {% with t=item.updated_at|default:item.created_at %}
                    {% if t %}
                        {% if t|timesince == "0 minutes" %}
                            Ø§Ù„Ø¢Ù†
                        {% else %}
                            Ù…Ù†Ø° {{ t|timesince }}
                        {% endif %}
                    {% endif %}
                {% endwith %}
            </span>

        </div>
    </div>

    <!-- Footer (User LEFT â€” Price RIGHT, as mockup) -->
    <div class="flex items-center justify-between p-4 border-t bg-white">

        <!-- User on LEFT -->
        <div class="flex items-center gap-2">
            <div class="w-9 h-9 rounded-full bg-gray-200 flex items-center justify-center
                        text-xs font-bold text-gray-700 shadow">
                {{ item.user.username|first|upper }}
            </div>
            <span class="text-sm font-semibold text-gray-800 truncate max-w-[90px]">
                {{ item.user.username }}
            </span>
        </div>

        <!-- Price on RIGHT -->
        <div class="bg-[var(--rukn-orange)] text-white text-base font-bold px-4 py-1.5
                    rounded-xl shadow-md min-w-[70px] text-center">
            {{ item.price|floatformat:0 }} Ø¯.Ø£
        </div>

    </div>

    <!-- Clickable overlay -->
    <a href="{% url 'item_detail' item.id %}"
       class="absolute inset-0 z-10"
       aria-label="{% trans 'View Details' %}">
    </a>
</article>
