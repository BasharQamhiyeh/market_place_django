{% load i18n humanize %}

<article class="relative bg-white rounded-xl overflow-hidden card-shadow hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
  {% if item.main_photo %}
    <img src="{{ item.main_photo.image.url }}" alt="{{ item.title }}"
         class="w-full h-44 object-cover hover:scale-105 transition-transform duration-300">
  {% else %}
    <div class="w-full h-44 bg-gray-100 flex items-center justify-center text-sm text-gray-400">
      {% trans "No image" %}
    </div>
  {% endif %}

  <div class="p-4">
    <h3 class="font-semibold text-lg truncate" title="{{ item.title }}">{{ item.title }}</h3>
    <div class="mt-2 flex items-center justify-between text-sm text-[var(--muted)]">
      <span>
        {% if item.city %}
          {{ item.city }}
        {% endif %}
      </span>
      <span>
        {% if item.updated_at %}
          {{ item.updated_at|timesince }} {% trans "ago" %}
        {% else %}
          {{ item.created_at|timesince }} {% trans "ago" %}
        {% endif %}
      </span>
    </div>
  </div>

  <div class="flex items-center justify-between p-4 border-t border-gray-100">
    <div class="bg-[var(--rukn-orange)] text-white text-base font-bold px-3 py-1 rounded-md shadow">
      {{ item.price|floatformat:0 }} د.أ
    </div>
    <div class="flex items-center gap-2">
      <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs">
        {{ item.user.username|first|upper }}
      </div>
      <span class="text-sm font-medium text-gray-800">
        {{ item.user.username }}
      </span>
    </div>
  </div>

  <a href="{% url 'item_detail' item.id %}"
     class="absolute inset-0"
     aria-label="{% trans 'View Details' %}">
  </a>
</article>
