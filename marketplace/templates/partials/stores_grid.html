{% load humanize %}
<!-- Store Cards Generated by Backend -->
{% for store in stores %}
<div class="store-card group bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 flex flex-col sm:flex-col border border-slate-100 h-full">
     
    <!-- Logo Section -->
    <div class="relative w-28 sm:w-full h-32 sm:h-16 bg-slate-50 flex-shrink-0 flex items-center justify-center border-l sm:border-l-0 sm:border-b border-slate-50 mb-1">
        <div class="z-10 w-20 h-20 sm:w-20 sm:h-20 rounded-2xl bg-white p-2 shadow-sm ring-4 ring-white sm:absolute sm:-bottom-8 sm:left-1/2 sm:-translate-x-1/2">
            {% if store.logo %}
            <img src="{{ store.logo.url }}" class="w-full h-full object-contain" alt="{{ store.name }}">
            {% else %}
            <div class="w-full h-full flex items-center justify-center text-gray-400 text-2xl font-bold">
                {{ store.name|slice:":1" }}
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Store Info -->
    <div class="flex flex-col flex-1 p-3 sm:pt-10 sm:px-4 sm:pb-4 text-right sm:text-center min-w-0 justify-between">
       
        <div>
            <h4 class="font-extrabold text-base sm:text-lg text-slate-800 truncate mb-0.5">
                {{ store.name }}
            </h4>
            
            <p class="text-[11px] sm:text-sm text-slate-500 line-clamp-1 sm:line-clamp-2 mb-3">
                {{ store.description|default:"Ù…ØªØ¬Ø± Ù…ÙˆØ«ÙˆÙ‚ Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Ø±ÙƒÙ†"|truncatewords:15 }}
            </p>

            <!-- Rating -->
            <div class="flex items-center sm:justify-center gap-1 mb-2">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="#fbbf24">
                    <path d="M12 2.5l3.1 6.3 6.9 1-5 4.9 1.2 6.9L12 17.8l-6.2 3.3 1.2-6.9-5-4.9 6.9-1z"/>
                </svg>
                <span class="text-xs font-bold text-slate-700">
                    {{ store.rating_avg|floatformat:1|default:"0.0" }}
                </span>
                <span class="text-[10px] text-slate-400 font-normal">
                    ({{ store.rating_count|default:0 }} ØªÙ‚ÙŠÙŠÙ…)
                </span>
            </div>
        </div>

        <!-- Stats & Visit Button -->
        <div class="pt-2 border-t border-slate-50 flex items-center justify-between gap-2">
            <div class="flex flex-wrap gap-x-3 gap-y-1 sm:flex-col sm:items-center sm:gap-1">
                <!-- Followers -->
                <div class="flex items-center gap-1">
                    <svg class="w-4 h-4 scale-90" viewBox="0 0 24 24" fill="#16a34a">
                        <path d="M16 11c1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3 1.3 3 3 3zM8 11c1.7 0 3-1.3 3-3S9.7 5 8 5 5 6.3 5 8s1.3 3 3 3zM8 13c-2.7 0-8 1.3-8 4v2h16v-2c0-2.7-5.3-4-8-4zM16 13c-.3 0-.6 0-.9.1 1.4.8 2.9 2.1 2.9 3.9v2h6v-2c0-2.7-5.3-4-8-4z"/>
                    </svg>
                    <span class="text-[11px] sm:text-sm font-black text-slate-700">
                        {{ store.followers_count|default:0 }}
                    </span>
                    <span class="text-[10px] text-slate-400 font-bold">Ù…ØªØ§Ø¨Ø¹</span>
                </div>
                
                <!-- Ads Count -->
                <div class="flex items-center gap-1">
                    <svg class="w-4 h-4 scale-90" viewBox="0 0 24 24" fill="#2563eb">
                        <path d="M21 7l-9-5-9 5v10l9 5 9-5V7z"/>
                    </svg>
                    <span class="text-[11px] sm:text-sm font-black text-slate-700">
                        {{ store.ads_count|default:0 }}
                    </span>
                    <span class="text-[10px] text-slate-400 font-bold">Ø¥Ø¹Ù„Ø§Ù†</span>
                </div>
            </div>

            <!-- Visit Store Button -->
            <a href="{% url 'store_profile' store.id %}"
               class="bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded-xl text-[11px] font-black transition-all whitespace-nowrap shadow-sm shadow-orange-100">
                Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ØªØ¬Ø±
            </a>
        </div>

    </div>
</div>
{% empty %}
<div class="col-span-full text-center py-20 text-slate-400">
    <div class="text-5xl mb-4">ğŸª</div>
    <p class="text-lg font-bold mb-1">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØªØ§Ø¬Ø±</p>
    <p class="text-sm">Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„Ø§ØªØ± Ø£Ùˆ Ø§Ù„Ø¨Ø­Ø«</p>
</div>
{% endfor %}
