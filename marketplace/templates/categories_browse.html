{% extends "base.html" %}
{% load static i18n %}

{% block title %}تصفح الأقسام - ركن{% endblock %}

{% block base_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/categories_browse.css' %}">
{% endblock %}

{% block content %}
<main class="max-w-7xl mx-auto px-4 py-8">

    <!-- Breadcrumb -->
    <nav aria-label="Breadcrumb" class="text-sm text-gray-500">
        <ol class="flex items-center gap-2 mb-6">
            <li><a href="{% url 'home' %}" class="hover:text-[var(--rukn-orange)] transition">الرئيسية</a></li>
            <li class="text-gray-400">›</li>
            <li><a href="#" class="hover:text-[var(--rukn-orange)] transition font-extrabold">جميع الأقسام</a></li>
        </ol>
    </nav>

    <!-- ===== Image Advertisement Banner (3 ads + dots) ===== -->
    <section class="mb-6">
        <div class="ad-banner-wrap" id="adBanner">
            <div class="relative">
                <div class="ad-banner-slides">
                    <img class="ad-banner-img ad-slide is-active"
                         src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=1600&auto=format&fit=crop"
                         alt="مساحة إعلانية 1" />
                    <img class="ad-banner-img ad-slide"
                         src="https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1600&auto=format&fit=crop"
                         alt="مساحة إعلانية 2" />
                    <img class="ad-banner-img ad-slide"
                         src="https://images.unsplash.com/photo-1493666438817-866a91353ca9?q=80&w=1600&auto=format&fit=crop"
                         alt="مساحة إعلانية 3" />
                </div>

                <div class="ad-banner-overlay">
                    <div class="w-full flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 sm:gap-4">
                        <div class="text-white">
                            <h2 id="bannerTitle" class="mt-2 sm:mt-3 text-[18px] leading-snug sm:text-2xl font-extrabold">
                                عروض نهاية السنة — خصومات قوية على الإلكترونيات
                            </h2>
                            <p id="bannerDesc" class="mt-1.5 sm:mt-2 text-[12.5px] sm:text-sm text-white/90 max-w-2xl leading-relaxed">
                                مساحة إعلانية قابلة للاستبدال بصورة (Banner) — تصميم أنيق بدون صندوق الصفحة.
                            </p>
                        </div>

                        <div class="ad-cta ad-cta-corner">
                            <a id="bannerPrimary" href="#" class="btn-primary">تسوّق الآن</a>
                            <a id="bannerSecondary" href="#" class="btn-ghost">تفاصيل</a>
                        </div>

                        <div class="ad-dots" role="tablist" aria-label="Banner slider">
                            <button class="ad-dot is-active" type="button" data-idx="0" aria-label="إعلان 1"></button>
                            <button class="ad-dot" type="button" data-idx="1" aria-label="إعلان 2"></button>
                            <button class="ad-dot" type="button" data-idx="2" aria-label="إعلان 3"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="mb-6 flex justify-between items-end">
        <div>
            <h3 class="text-2xl font-black text-slate-800 flex items-center gap-2">
                <span class="w-2 h-6 bg-[#ff7a18] rounded-full"></span>
                تصفح حسب الفئة
            </h3>
            <span class="text-sm text-slate-500 italic sm:mt-0 mt-5">اختر قسمك المفضل لمشاهدة التفاصيل</span>
        </div>
    </div>

    <!-- ====== MAIN CATEGORIES SELECTION ====== -->
    <section class="mb-10 relative">
        <button id="catRight"
                class="absolute right-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full w-9 h-9 flex items-center justify-center z-10 hover:bg-orange-50 text-orange-500">
            ▶
        </button>

        <div id="mainCategoryWrapper" class="overflow-x-hidden">
            <div id="mainCategoryNav" class="flex gap-2 border-b border-gray-100 px-12">
                <!-- JS -->
            </div>
        </div>

        <button id="catLeft"
                class="absolute left-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full w-9 h-9 flex items-center justify-center z-10 hover:bg-orange-50 text-orange-500">
            ◀
        </button>
    </section>

    <section id="categoryContent" class="space-y-12">
        <!-- JS -->
    </section>

</main>

<!-- ✅ JSON payload -->
<script id="categories-json" type="application/json">{{ categories_json|safe }}</script>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script src="{% static 'js/categories_browse.js' %}"></script>
{% endblock %}
