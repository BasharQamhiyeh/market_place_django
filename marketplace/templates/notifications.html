{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Notifications" %}{% endblock %}
{% block content %}

<h2>{% trans "Notifications" %}</h2>

{% if notifications %}
<ul style="list-style:none; padding:0;">
    {% for n in notifications %}
        <li style="margin-bottom:15px; padding:10px; border-bottom:1px solid #ddd;
                   {% if not n.is_read %}font-weight:bold; background:#f7f7f7;{% endif %}">

            <strong>{{ n.title }}</strong><br>
            {{ n.body }}<br>

            {% if n.item_id %}
                {% if request.user.is_staff %}
                    {# ✅ staff sees admin moderation page #}
                    <a href="{% url 'admin:marketplace_item_change' n.item_id %}"
                       style="font-size:14px;">
                        {% trans "Review Item" %}
                    </a>
                {% else %}
                    {# ✅ normal users see the public item page #}
                    <a href="{% url 'item_detail' n.item_id %}"
                       style="font-size:14px;">
                        {% trans "View Item" %}
                    </a>
                {% endif %}
            {% endif %}

            <br>
            <small style="color:#666;">{{ n.created_at }}</small>
        </li>
    {% endfor %}
</ul>
{% else %}
<p>{% trans "No notifications." %}</p>
{% endif %}

{% endblock %}
