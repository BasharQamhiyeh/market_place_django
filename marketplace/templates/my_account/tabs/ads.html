{# templates/my_account/tabs/ads.html #}
{% load i18n %}

<div class="ads-tab">

  <div class="ads-head">
    <div class="ads-title-row">
      <h2 class="ads-title">ğŸ“¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h2>

      <div class="ads-actions">
        <div class="ads-count">
          Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª: <span id="adsCount">{% if my_ads %}{{ my_ads|length }}{% else %}0{% endif %}</span>
        </div>

        <a href="#" class="ads-add-btn">Ø£Ø¶Ù Ø¥Ø¹Ù„Ø§Ù†</a>
      </div>
    </div>
  </div>

  {# IMPORTANT: id="adsList" MUST exist exactly like this #}
  <div class="ads-list" id="adsList">
    {% if my_ads %}
      {% for ad in my_ads %}
        <div
          class="ad-row
            {% if ad.status == 'pending' %}
              bg-yellow-50 border-yellow-300
            {% elif ad.status == 'rejected' %}
              bg-red-50 border-red-300
            {% else %}
              bg-white border-gray-200
            {% endif %}
          "
          data-ad-id="{{ ad.id }}"
        >
          <!-- Media -->
          <div class="ad-media-mock">
            <span class="ad-cat-mock">
              {{ ad.category|default:"Ø¨Ø¯ÙˆÙ† Ù‚Ø³Ù…" }}
            </span>

            {% if ad.image %}
              <img src="{{ ad.image }}" alt="{{ ad.title|default:'Ø¥Ø¹Ù„Ø§Ù†' }}" class="ad-img-mock">
            {% else %}
              <div class="ad-img-mock ad-img--empty">Ø¨Ø¯ÙˆÙ† ØµÙˆØ±Ø©</div>
            {% endif %}
          </div>

          <!-- Body -->
          <div class="ad-body-mock">
            <div class="ad-header-mock">

              <span class="ad-id-mock">
                <span class="inline-flex">
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <rect x="3" y="4" width="18" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
                    <path d="M7 8h10M7 12h10M7 16h6" stroke="currentColor" stroke-width="2"/>
                  </svg>
                  Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:
                  <span class="ad-id-num-mock">{{ ad.id }}</span>
                </span>
              </span>

              {% if ad.status == "active" %}
                <span class="status-badge status-active">
                  <span class="inline-flex">
                    <svg class="w-3 h-3" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                      <circle cx="12" cy="12" r="10"/>
                    </svg>
                  </span>
                  Ù…ÙØ¹Ù‘Ù„
                </span>
              {% elif ad.status == "pending" %}
                <span class="status-badge status-pending">
                  <span class="inline-flex">
                    <svg class="w-3 h-3" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                      <circle cx="12" cy="12" r="10"/>
                    </svg>
                  </span>
                  Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
                </span>
              {% elif ad.status == "rejected" %}
                <span class="status-badge status-rejected">
                  <span class="inline-flex">
                    <svg class="w-3 h-3" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                      <circle cx="12" cy="12" r="10"/>
                    </svg>
                  </span>
                  Ù…Ø±ÙÙˆØ¶
                </span>
              {% endif %}

              {% if ad.featured %}
                {% if ad.featuredDaysLeft and ad.featuredDaysLeft > 0 %}
                  <span class="feature-badge">â­ Ù…Ù…ÙŠØ² â€” Ù…ØªØ¨Ù‚Ù‘ÙŠ: {{ ad.featuredDaysLeft }} ÙŠÙˆÙ…</span>
                {% else %}
                  <span class="feature-badge">â­ Ù…Ù…ÙŠØ²</span>
                {% endif %}
              {% endif %}
            </div>

            <div class="ad-title-price-mock">
              <h3 class="ad-title-mock">{{ ad.title }}</h3>
              <span class="ad-price-mock">{{ ad.price }} Ø¯.Ø£</span>
            </div>

            <div class="ad-meta-mock">
              <span class="meta-pill">
                <svg class="w-4 h-4 icon-orange" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M12 21s7-7 7-11a7 7 0 1 0-14 0c0 4 7 11 7 11Z" stroke="currentColor" stroke-width="2"/>
                  <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>{{ ad.city|default:"â€”" }}</span>
              </span>

              <span class="meta-pill">
                <svg class="w-4 h-4 icon-orange" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                  <path d="M8 2v4M16 2v4M3 10h18" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>{{ ad.date|default:"â€”" }}</span>
              </span>

              <span class="meta-pill">
                <svg class="w-4 h-4 icon-orange" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2"/>
                  <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>{{ ad.views|default:0 }} Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
              </span>

              <span class="meta-pill">
                <svg class="w-4 h-4 icon-red" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8Z"
                        stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>{{ ad.favCount|default:0 }} Ù…ÙØ¶Ù„Ø©</span>
              </span>
            </div>

            {% if ad.status == "rejected" and ad.rejectReason %}
              <p class="ad-reject-mock">
                <svg class="w-4 h-4 icon-red" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 7v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <circle cx="12" cy="16" r="1" fill="currentColor"/>
                </svg>
                <span>Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶: <b class="rej-bold">{{ ad.rejectReason }}</b></span>
              </p>
            {% endif %}
          </div>

          <!-- Actions -->
          <div class="ad-actions-mock">
            <a href="{{ ad.editUrl }}" class="btn-mock pill-blue {% if ad.status == 'pending' %}is-disabled{% endif %}">
              <span class="inline-flex">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L8 18l-4 1 1-4 11.5-11.5Z" stroke="currentColor" stroke-width="2"/>
                </svg>
              </span>
              ØªØ¹Ø¯ÙŠÙ„
            </a>

            <button type="button"
                    class="btn-mock pill-red {% if ad.status == 'pending' %}is-disabled{% endif %}"
                    data-action="delete"
                    data-id="{{ ad.id }}">
              <span class="inline-flex">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M3 6h18M8 6v14h8V6M10 10v6M14 10v6" stroke="currentColor" stroke-width="2"/>
                </svg>
              </span>
              Ø­Ø°Ù
            </button>

            <button type="button"
                    class="btn-mock pill-green {% if ad.status != 'active' %}is-disabled{% endif %}"
                    data-action="republish"
                    data-id="{{ ad.id }}">
              <span class="inline-flex">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M21 12a9 9 0 1 1-3-6.7" stroke="currentColor" stroke-width="2"/>
                  <path d="M21 3v6h-6" stroke="currentColor" stroke-width="2"/>
                </svg>
              </span>
              Ø¥Ø¹Ø§Ø¯Ø© Ù†Ø´Ø±
            </button>

            {% if ad.status != "active" or ad.featuredDaysLeft|default:0 > 0 %}
              <button type="button" class="btn-mock pill-orange is-disabled">
                <span class="inline-flex">
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <polygon points="12 2 15 9 22 9 17 14 19 21 12 17 5 21 7 14 2 9 9 9" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </span>
                ØªÙ…ÙŠÙŠØ²
              </button>
            {% else %}
              <button type="button" class="btn-mock pill-orange" data-action="highlight" data-id="{{ ad.id }}">
                <span class="inline-flex">
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <polygon points="12 2 15 9 22 9 17 14 19 21 12 17 5 21 7 14 2 9 9 9" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </span>
                ØªÙ…ÙŠÙŠØ²
              </button>
            {% endif %}

          </div>

        </div>
      {% endfor %}

    {% else %}
      <div class="empty-state">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</div>
    {% endif %}
  </div>

</div>
