{% load static i18n %}

<div id="msgsBoot" data-open-conversation="{{ request.GET.c|default:'' }}"></div>

<section id="msgsListUI">

  <div class="msgs-head">
    <div class="msgs-head__row">
      <h2 class="msgs-title">
        <svg class="msgs-title__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 15a4 4 0 0 1-4 4H7l-4 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"
                stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        </svg>
        الرسائل
      </h2>

      <div class="msgs-counters">
        <span class="msgs-counter msgs-counter--total">
          الإجمالي: <span id="totalMsgs">0</span>
        </span>
        <span class="msgs-counter msgs-counter--unread">
          غير مقروء: <span id="unreadMsgs">0</span>
        </span>
      </div>
    </div>

    <div class="msgs-search">
      <input id="chatSearch" type="text" placeholder="ابحث عن محادثة...">
      <span class="msgs-search__icon" aria-hidden="true">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none">
          <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/>
          <path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="2"/>
        </svg>
      </span>
    </div>

    <div class="msgs-filters">
      <button class="chat-filter-btn active" data-filter="all"     type="button">الكل</button>
      <button class="chat-filter-btn"        data-filter="ad"      type="button">إعلانات</button>
      <button class="chat-filter-btn"        data-filter="request" type="button">طلبات</button>
      <button class="chat-filter-btn"        data-filter="store"   type="button">المتجر</button>
    </div>
  </div>


  <div id="conversationsList" class="conversations-list"></div>

  <div id="msgsEmpty" class="msgs-empty hidden">
    <svg class="msgs-empty-ico" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M21 15a4 4 0 0 1-4 4H7l-4 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"
            stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
    </svg>
    <span>لا يوجد رسائل</span>
  </div>

  {#
    Chat panel — lives here in the DOM but JS moves it inside #conversationsList
    right after the active .chat-item.  display:none initially.
  #}
  <section id="chatPanel" class="chat-panel" style="display:none;">

    <div class="chat-head">
      <div class="chat-head__left">
        <img id="chatUserImg" class="chat-head__avatar" src="" alt="">
        <div class="chat-head__meta">
          <div id="chatUserName" class="chat-head__name">اسم المستخدم</div>
          <div id="chatUserStatus" class="chat-head__status">● متصل الآن</div>
        </div>
      </div>

      <div class="chat-head__right">
        <div id="chatItemType" class="chat-head__type"></div>
      </div>
    </div>

    <div id="chatArea" class="chat-area"></div>

    <div class="chat-compose">
      <input id="chatInput" type="text" placeholder="اكتب رسالة...">
      <button id="chatSendBtn" class="chat-send" type="button">إرسال</button>
      {# Back / collapse — most useful on mobile #}
      <button id="chatBackBtn" class="chat-back" type="button">
        <span class="chat-back__inner">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2"/>
          </svg>
          إغلاق
        </span>
      </button>
    </div>

  </section>

</section>