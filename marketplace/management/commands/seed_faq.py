from django.core.management.base import BaseCommand

from marketplace.models import FAQCategory, FAQQuestion


class Command(BaseCommand):
    help = "Seed FAQ categories and questions from the UI mockup"

    def handle(self, *args, **options):
        DATA = [
            {
                "key": "about",
                "name_ar": "عن ركن",
                "icon": "info",
                "order": 1,
                "questions": [
                    (
                        "ما هو موقع ركن؟",
                        "ركن منصة إلكترونية محلية تتيح للأفراد والمتاجر عرض المنتجات والخدمات أو إنشاء طلبات، مع إمكانية التواصل المباشر بين الأطراف بسهولة ووضوح."
                    ),
                    (
                        "هل ركن مخصص لمنطقة معينة؟",
                        "يركز ركن على خدمة المجتمع المحلي داخل الأردن، مع تنظيم المحتوى حسب المناطق لتسهيل الوصول والتواصل بين المستخدمين."
                    ),
                    (
                        "ما الذي يميز ركن عن غيره؟",
                        "يتميز ركن بتجربة استخدام بسيطة، وتصنيفات واضحة، وتركيز على الطلبات إلى جانب الإعلانات، مما يجعل الوصول لما تحتاجه أسرع وأسهل."
                    ),
                    (
                        "هل ركن مخصص للأفراد أم للمتاجر؟",
                        "ركن مخصص للأفراد والمتاجر على حد سواء، ويمكن لأي مستخدم إنشاء إعلانات أو طلبات حسب احتياجه."
                    ),
                ],
            },
            {
                "key": "account",
                "name_ar": "الحساب والتسجيل",
                "icon": "user-cog",
                "order": 2,
                "questions": [
                    (
                        "هل يجب إنشاء حساب؟",
                        "يمكنك تصفح الموقع بدون تسجيل، لكن إنشاء حساب مطلوب لإضافة إعلانات أو طلبات أو التواصل مع المستخدمين الآخرين."
                    ),
                    (
                        "هل يمكنني استعادة كلمة المرور؟",
                        "نعم، يمكنك استعادة كلمة المرور بسهولة من خلال خيار “نسيت كلمة المرور”، واتباع التعليمات الإرشادية."
                    ),
                    (
                        "هل يمكن تعديل بيانات الحساب؟",
                        "نعم، يمكنك تعديل بياناتك الشخصية ومعلومات التواصل من خلال إعدادات الحساب في أي وقت."
                    ),
                    (
                        "هل يمكن إنشاء أكثر من حساب بنفس رقم الموبايل؟",
                        "لا، يُسمح بإنشاء حساب واحد فقط لكل رقم موبايل حفاظًا على أمان المستخدمين."
                    ),
                ],
            },
            {
                "key": "ads",
                "name_ar": "الإعلانات",
                "icon": "megaphone",
                "order": 3,
                "questions": [
                    (
                        "هل نشر الإعلانات مجاني؟",
                        "نعم، نشر الإعلانات مجاني، مع توفر باقات مدفوعة اختيارية لتمييز الإعلان وزيادة ظهوره."
                    ),
                    (
                        "كم عدد الإعلانات المسموح نشرها؟",
                        "يمكنك نشر عدة إعلانات، مع الالتزام بسياسات الاستخدام وعدم تكرار الإعلان نفسه."
                    ),
                    (
                        "لماذا لم يظهر إعلاني مباشرة؟",
                        "قد يخضع الإعلان للمراجعة قبل نشره للتأكد من مطابقته للشروط."
                    ),
                    (
                        "هل يمكن تعديل أو حذف الإعلان؟",
                        "نعم، يمكنك تعديل أو حذف إعلانك في أي وقت من خلال لوحة التحكم الخاصة بحسابك."
                    ),
                    (
                        "كم مدة بقاء الإعلان؟",
                        "يبقى الإعلان نشطًا دائماً، ويمكنك إعادة نشره كل 7 أيام ليبقى في المقدمة."
                    ),
                ],
            },
            {
                "key": "requests",
                "name_ar": "الطلبات",
                "icon": "clipboard-list",
                "order": 4,
                "questions": [
                    (
                        "كيف أقوم بإنشاء طلب؟",
                        "بعد تسجيل الدخول، اختر القسم المناسب، أدخل تفاصيل طلبك بوضوح، ثم انشره ليتمكن الآخرون من تقديم عروضهم أو التواصل معك."
                    ),
                    (
                        "هل يمكن تعديل أو إلغاء الطلب؟",
                        "نعم، يمكنك تعديل أو إلغاء الطلب في أي وقت من خلال لوحة التحكم الخاصة بك قبل إغلاقه."
                    ),
                    (
                        "ماذا يحدث بعد استلام عروض على طلبي؟",
                        "يمكنك مراجعة العروض، مقارنة التفاصيل، ثم التواصل مباشرة مع الطرف المناسب لإتمام الاتفاق خارج المنصة."
                    ),
                    (
                        "هل تظهر بيانات التواصل الخاصة بي للجميع؟",
                        "تظهر بيانات التواصل فقط داخل الطلب أو الإعلان وفق الإعدادات التي تختارها (بإمكانك اختيار عدم اظهار رقمك)."
                    ),
                ],
            },
            {
                "key": "safety",
                "name_ar": "الأمان والدعم",
                "icon": "shield",
                "order": 5,
                "questions": [
                    (
                        "هل ركن مسؤول عن البيع؟",
                        "لا، ركن منصة وسيطة لعرض الإعلانات والطلبات فقط، ولا يتحمل مسؤولية عمليات البيع أو الاتفاقات بين المستخدمين."
                    ),
                    (
                        "كيف أبلّغ عن إعلان مخالف؟",
                        "يمكنك استخدام زر “الإبلاغ” الموجود داخل الإعلان، الطلب أو صفحة المتجر وسيقوم فريق ركن بمراجعته واتخاذ الإجراء المناسب."
                    ),
                    (
                        "كيف أتواصل مع الدعم؟",
                        "يمكنك التواصل مع فريق الدعم عبر صفحة “تواصل معنا”، وسيتم الرد عليك في أقرب وقت ممكن."
                    ),
                    (
                        "كيف أحمي نفسي من الاحتيال؟",
                        "ننصح بعدم تحويل أي مبالغ مالية قبل المعاينة، والتواصل المباشر، والإبلاغ عن أي سلوك مشبوه."
                    ),
                ],
            },
            {
                "key": "issues",
                "name_ar": "مشاكل الحساب",
                "icon": "settings",
                "order": 6,
                "questions": [
                    (
                        "لا أستطيع تسجيل الدخول، ماذا أفعل؟",
                        "تأكد من صحة رقم الموبايل وكلمة المرور، وفي حال نسيانها استخدم خيار “نسيت كلمة المرور” لإعادة تعيينها."
                    ),
                    (
                        "تم إيقاف حسابي، ما السبب؟",
                        "قد يتم إيقاف الحساب في حال مخالفة شروط الاستخدام أو نشر محتوى مخالف. يمكنك التواصل مع الدعم لمعرفة السبب وتقديم طلب مراجعة."
                    ),
                    (
                        "لم يصلني رمز التفعيل",
                        "في حال عدم وصول الرسالة يمكنك إعادة طلب الرمز أو التواصل مع الدعم من خلال صفحة تواصل معنا."
                    ),
                ],
            },
        ]

        cat_created = 0
        q_created = 0

        for cat in DATA:
            category, created = FAQCategory.objects.update_or_create(
                key=cat["key"],
                defaults={
                    "name_ar": cat["name_ar"],
                    "icon": cat["icon"],
                    "order": cat["order"],
                    "is_active": True,
                },
            )
            if created:
                cat_created += 1

            for idx, (q, a) in enumerate(cat["questions"], start=1):
                question, created_q = FAQQuestion.objects.update_or_create(
                    category=category,
                    question_ar=q,
                    defaults={
                        "answer_ar": a,
                        "order": idx,
                        "is_active": True,
                    },
                )
                if created_q:
                    q_created += 1

        self.stdout.write(
            self.style.SUCCESS(
                f"FAQ seed completed ✔ Categories created: {cat_created}, Questions created: {q_created}"
            )
        )
